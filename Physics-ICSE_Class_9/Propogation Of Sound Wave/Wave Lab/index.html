<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚛️</text></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Wave Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #0f172a;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        canvas {
            display: block;
        }

        /* Custom Slider Styling */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }

        input[type=range]:focus {
            outline: none;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 18px;
            width: 18px;
            border-radius: 50%;
            background: #ffffff;
            margin-top: -7px;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            cursor: pointer;
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            background: #334155;
            border-radius: 2px;
        }

        /* Amplitude Slider Color */
        #ampSlider::-webkit-slider-thumb {
            background: #f472b6;
            box-shadow: 0 0 10px rgba(244, 114, 182, 0.5);
        }

        #ampSlider::-webkit-slider-runnable-track {
            background: linear-gradient(90deg, #334155, #be185d);
        }

        /* Frequency Slider Color */
        #freqSlider::-webkit-slider-thumb {
            background: #38bdf8;
            box-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
        }

        #freqSlider::-webkit-slider-runnable-track {
            background: linear-gradient(90deg, #334155, #0ea5e9);
        }
    </style>
</head>

<body class="text-slate-200 h-screen w-screen flex flex-col">

    <!-- Canvas Area -->
    <div class="relative flex-grow w-full h-full bg-slate-900 overflow-hidden">
        <canvas id="waveCanvas" class="absolute inset-0"></canvas>

        <!-- Axis Lines -->
        <div class="absolute inset-0 pointer-events-none border-b border-slate-700/50 top-1/2"></div>
        <div class="absolute inset-0 pointer-events-none border-l border-slate-700/50 left-0"></div>
    </div>

    <!-- Control Panel -->
    <div class="bg-slate-800/90 backdrop-blur-md border-t border-slate-700 p-6 shadow-2xl z-20">
        <div class="max-w-5xl mx-auto flex flex-col md:flex-row gap-8 items-center justify-between">

            <!-- Controls -->
            <div class="flex-1 w-full space-y-6">

                <!-- Amplitude Control -->
                <div class="group">
                    <div class="flex justify-between mb-2">
                        <label class="text-pink-400 font-bold uppercase text-xs tracking-wider flex items-center gap-2">
                            <span class="text-lg">â†•</span> Amplitude (Volume)
                        </label>
                        <span id="ampValue" class="font-mono text-pink-300">0.5</span>
                    </div>
                    <input type="range" id="ampSlider" min="0" max="100" value="50">
                </div>

                <!-- Frequency Control -->
                <div class="group">
                    <div class="flex justify-between mb-2">
                        <label class="text-sky-400 font-bold uppercase text-xs tracking-wider flex items-center gap-2">
                            <span class="text-lg">â†”</span> Frequency (Pitch)
                        </label>
                        <span id="freqValue" class="font-mono text-sky-300">200 Hz</span>
                    </div>
                    <input type="range" id="freqSlider" min="100" max="800" value="200">
                </div>
            </div>

            <!-- Stats Display -->
            <div
                class="flex-shrink-0 w-full md:w-auto bg-slate-900/80 p-4 rounded-xl border border-slate-700 grid grid-cols-2 md:grid-cols-1 gap-4">
                <div>
                    <div class="text-slate-500 text-xs uppercase font-bold mb-1">Wavelength (Î»)</div>
                    <div id="wavelengthDisplay" class="text-2xl font-mono text-white">-- m</div>
                </div>
                <div>
                    <div class="text-slate-500 text-xs uppercase font-bold mb-1">Time Period (T)</div>
                    <div id="periodDisplay" class="text-2xl font-mono text-white">-- s</div>
                </div>
            </div>

            <!-- Audio Toggle -->
            <button id="audioToggle"
                class="flex-shrink-0 w-full md:w-auto bg-slate-700 hover:bg-slate-600 text-white font-bold py-4 px-8 rounded-xl transition-all flex items-center justify-center gap-3 shadow-lg">
                <span class="text-2xl">ðŸ”‡</span>
                <span class="uppercase tracking-wide text-sm">Enable Audio</span>
            </button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('waveCanvas');
        const ctx = canvas.getContext('2d');

        // --- Configuration & State ---
        let width, height;
        let animationId;
        let phase = 0;

        // Physics Constants
        const WAVE_SPEED_PX = 4; // Visual speed pixels per frame
        const SIMULATED_SPEED_OF_SOUND = 340; // m/s for calculation display

        // State Variables
        let amplitude = 50; // Visual height scale
        let frequency = 200; // Hz
        let isAudioOn = false;

        // --- Audio Context Setup ---
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioCtx;
        let oscillator;
        let gainNode;

        function initAudio() {
            if (audioCtx) return;

            audioCtx = new AudioContext();

            oscillator = audioCtx.createOscillator();
            oscillator.type = 'sine';
            oscillator.frequency.value = frequency; // Start freq

            gainNode = audioCtx.createGain();
            gainNode.gain.value = 0; // Start silent

            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            oscillator.start();
        }

        // --- DOM Elements ---
        const ampSlider = document.getElementById('ampSlider');
        const freqSlider = document.getElementById('freqSlider');
        const ampValue = document.getElementById('ampValue');
        const freqValue = document.getElementById('freqValue');
        const wavelengthDisplay = document.getElementById('wavelengthDisplay');
        const periodDisplay = document.getElementById('periodDisplay');
        const audioBtn = document.getElementById('audioToggle');

        // --- resizing ---
        function resize() {
            width = canvas.width = canvas.parentElement.clientWidth;
            height = canvas.height = canvas.parentElement.clientHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        // --- Calculations & Updates ---
        function updateCalculations() {
            // Update UI Labels
            ampValue.innerText = (amplitude / 100).toFixed(2) + " units"; // Normalized display
            freqValue.innerText = frequency + " Hz";

            // Physics Calculations
            // Formula: Î» = v / f
            const wavelength = SIMULATED_SPEED_OF_SOUND / frequency;
            wavelengthDisplay.innerText = wavelength.toFixed(2) + " m";

            // Formula: T = 1 / f
            const period = 1 / frequency;
            periodDisplay.innerText = (period * 1000).toFixed(1) + " ms";

            // Audio Updates (Real-time)
            if (audioCtx && isAudioOn) {
                oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);
                // Map slider (0-100) to Gain (0.0 - 0.5) to prevent clipping/too loud
                const volume = (amplitude / 100) * 0.3;
                gainNode.gain.setTargetAtTime(volume, audioCtx.currentTime, 0.05);
            }
        }

        // --- Event Listeners ---
        ampSlider.addEventListener('input', (e) => {
            amplitude = parseInt(e.target.value);
            updateCalculations();
        });

        freqSlider.addEventListener('input', (e) => {
            frequency = parseInt(e.target.value);
            updateCalculations();
        });

        audioBtn.addEventListener('click', () => {
            if (!audioCtx) {
                initAudio();
            }

            // Toggle logic
            isAudioOn = !isAudioOn;

            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }

            if (isAudioOn) {
                audioBtn.innerHTML = '<span class="text-2xl">ðŸ”Š</span> <span class="uppercase tracking-wide text-sm">Mute Audio</span>';
                audioBtn.classList.replace('bg-slate-700', 'bg-sky-600');
                audioBtn.classList.replace('hover:bg-slate-600', 'hover:bg-sky-500');
                // Ramp up volume
                const volume = (amplitude / 100) * 0.3;
                gainNode.gain.setTargetAtTime(volume, audioCtx.currentTime, 0.1);
            } else {
                audioBtn.innerHTML = '<span class="text-2xl">ðŸ”‡</span> <span class="uppercase tracking-wide text-sm">Unmute</span>';
                audioBtn.classList.replace('bg-sky-600', 'bg-slate-700');
                audioBtn.classList.replace('hover:bg-sky-500', 'hover:bg-slate-600');
                // Ramp down volume
                gainNode.gain.setTargetAtTime(0, audioCtx.currentTime, 0.1);
            }
        });

        // --- Main Animation Loop ---
        function animate() {
            ctx.clearRect(0, 0, width, height);

            const centerY = height / 2;

            // Visual Wavelength Calculation
            // We need to map the Hz frequency to a visual pixel wavelength that looks good.
            // Higher Hz = Shorter Wavelength.
            // Let's use an arbitrary visual scalar.
            const visualWavelength = 40000 / frequency; // Scale factor 

            ctx.beginPath();
            ctx.moveTo(0, centerY);

            ctx.lineWidth = 4;
            // Gradient Stroke
            const gradient = ctx.createLinearGradient(0, 0, width, 0);
            gradient.addColorStop(0, '#f472b6'); // Pink
            gradient.addColorStop(1, '#38bdf8'); // Blue
            ctx.strokeStyle = gradient;

            // Draw Sine Wave
            for (let x = 0; x < width; x++) {
                // y = A * sin(kx - wt)
                // k = 2Ï€ / Î»
                const k = (2 * Math.PI) / visualWavelength;

                // We add 'phase' to simulate movement (wt)
                const y = centerY + (amplitude * 1.5) * Math.sin(k * x - phase);
                ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Draw moving "beads" on the wave to emphasize transverse motion
            // (Particles move up and down, wave moves left to right)
            const beadSpacing = visualWavelength / 4;
            ctx.fillStyle = '#ffffff';
            for (let x = 0; x < width; x += 50) {
                // Snap x to grid so beads don't travel with wave
                // Calculate Y for this fixed X
                const k = (2 * Math.PI) / visualWavelength;
                const y = centerY + (amplitude * 1.5) * Math.sin(k * x - phase);

                ctx.beginPath();
                ctx.arc(x, y, 3, 0, Math.PI * 2);
                ctx.fill();
            }

            // Increment phase
            // Speed of wave phase = angular frequency
            // To keep visual speed relatively constant or logical:
            phase += 0.15; // Constant flow speed rightwards

            requestAnimationFrame(animate);
        }

        // Initialize
        updateCalculations();
        animate();

    </script>
</body>

</html>
